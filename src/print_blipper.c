// vim:ts=4:sw=4:expandtab
#include <stdio.h>
#include <stdlib.h>
#include <yajl/yajl_gen.h>
#include <time.h>
#include "i3status.h"

#define MAX_STRING_SIZE     (128)
#define BINARY_BASE         (1024UL)
#define BLIP_LIST_SIZE      (121)
#define QUOTE_LIST_SIZE     (18)
#define EMOJI_LIST_SIZE     (346)

bool breathing_step = 0;

const char *blip_list[] = { "(^_^)", "[o_o]", "(^.^)", "(\".\")", "($.$)", "{-_-}", "(â€¢_â€¢)", "( â€¢_â€¢)", ">âŒâ– -â– ", "(âŒâ– _â– )", "â”€=â‰¡Î£((( ã¤â—•Ù„Íœâ—•)ã¤", "(â•¯Â°â–¡Â°)â•¯ï¸µ â”»â”â”» ï¸µ â•¯(Â°â–¡Â° â•¯)", "(áƒ¦Ë˜âŒ£Ë˜áƒ¦)", "à­§à¼¼à² ç›Šà² â•­âˆ©â•®à¼½", "â”ŒÐŸâ”(à² _à² )", "à² _à²°à³ƒ", "= _ =", "à¼¼ ã¤ â•¹ â•¹ à¼½ã¤", "(Â´ãƒ»Ï‰ãƒ»)ã£ç”±", "à¼¼ ã¤ â—•_â—• à¼½ã¤", "(â€¢-â€¢)âŒ", "(*ãƒ»â€¿ãƒ»)ãƒŽâŒ’*:ï½¥ï¾Ÿâœ§", "(âŒ Í¡â–  ÍœÊ– Í¡â– )", "( Í¡Â° ÍœÊ– Í¡Â°)ï¾‰âŒâ– -â– ", "(ï¾‰â˜‰ãƒ®âš†)ï¾‰ âŒ’*:ï½¥ï¾Ÿâœ§", "(_ã‚œ_ã‚œ_)", "(Ð·à¹Îµ)", "(â˜žï¾Ÿâˆ€ï¾Ÿ)â˜ž", "( Â´â—” Ï‰â—”`) ãƒŽã‚·", "ï¸»â•¦â•¤â”€", "à¼¼ã¤à² ç›Šà² à¼½ã¤ â”€=â‰¡Î£O))", "Ù©(^â€¿^)Û¶", "Ù©( à¹‘â•¹ ê‡´â•¹)Û¶", "á••( á› )á•—", "â™¥", "(Ê˜â€¿Ê˜)â•¯", "\\(Â°Î©Â°)/", "._.)/\\(._.", "( ï½€çš¿Â´)ï½¡ï¾/", "(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥", "â”ï½œï½¥à¸´Ï‰ï½¥à¸´#ï½œâ”Œ", "à­§(â–²á´—â–²)ãƒŽ", "(ã£Â´Ï‰`c)â™¡", "à¬˜(à©­*ËŠáµ•Ë‹)à©­*â€ŠÌ€Ë‹ ÉªÉ´á´›á´‡Ê€É´á´‡á´›", "(âá´¥âÊ‹)", "(Â¬,â€¿,Â¬)", "â‰§â—¡â‰¦", "â”¬â”´â”¬â”´â”¤ÆŸÍ†Ù„ÍœÆŸÍ† à¼½ï¾‰", "~\\(â‰§â–½â‰¦)/~", "(ã¥ ï¿£ Â³ï¿£)ã¥", "ï¼äººâ—• â€¿â€¿ â—•äººï¼¼", "(Ì¿â–€Ì¿â€¿â€‰Ì¿â–€Ì¿ Ì¿)", "_(:3ã€âˆ )_", "( Í¡Â° ÍœÊ– Í¡Â°)", "[Ì²Ì…$Ì²Ì…(Ì²Ì… Í¡Â° ÍœÊ– Í¡Â°Ì²Ì…)Ì²Ì…$Ì²Ì…]", "(à¸‡ Í Â° ÍŸÊ– Í¡Â°)à¸‡", "(ãƒŽ Í¡Â° ÍœÊ– Í¡Â°ãƒŽ) ï¸µ ( Íœã€‚ Í¡Ê– Íœã€‚)", "( Í¡Â°( Í¡Â° ÍœÊ–( Í¡Â° ÍœÊ– Í¡Â°)Ê– Í¡Â°) Í¡Â°)", "Â¯\\_( Í¡Â° ÍœÊ– Í¡Â°)_/Â¯", "( à²  ÍœÊ– à²°à³ƒ)", "â”¬â”´â”¬â”´â”¤( Í¡Â° ÍœÊ–â”œâ”¬â”´â”¬â”´", "á•¦( Í¡Â° ÍœÊ– Í¡Â°)á•¤", "â•°( Í¡Â° ÍœÊ– Í¡Â° )ã¤â”€â”€â˜†*:ãƒ»ï¾Ÿ", "â–ˆâ–ˆâ–ˆâ–’â–’â–’â–’â–’â–’â–’", "L(Â° O Â°L)", "(à²¡_à²¡)â˜ž", "á•¦(â©¾ï¹â©½)á•¥", "â™¥â€¿â™¥", "Ê•â™¥á´¥â™¥Ê”", "ê’° ê’¡âŒ“ê’¡ê’±", "-`áƒ¦Â´-", "ãƒ½(ï½€Ð”Â´)âŠƒâ”â˜†ï¾Ÿ. * ï½¥ ï½¡ï¾Ÿ,", "(/Â¯â—¡ â€¿ â—¡)/Â¯ ~ â”»â”â”»", "\\(Â°^Â°)/", "à² _à² ", "\\m/,(> . <)_\\m/", "à²¡_à²¡", "à¼¼ à¼Žàº¶ à·´ à¼Žàº¶à¼½", "â˜œ(ê’¡âŒ“ê’¡)", "â”Œ(â—‰ ÍœÊ–â—‰)ã¤â”£â–‡â–‡â–‡â•â”€â”€", "(âŒâŠ™_âŠ™)", "( Í¡Â° Íœ Â°)", "â†’_â†", "ï¼äººâ—• __ â—•äººï¼¼", "(ã£Ë†Ú¡Ë†Ï‚)", "\tï¼¼(ï¼¾Oï¼¾)ï¼", "áƒš(`â—‰â—žà±ªâ—Ÿâ—‰â€µáƒš)", "~=[,_,]:3", "@^@", "( Âºï¹ƒÂº )", "\t(âŠ™ï¼¿âŠ™')", "â—•_â—•", "â”¬â”€â”€â”¬ ãƒŽ(Ã²_Ã³ãƒŽ)", "(ëˆˆ_ëˆˆ)", "(â—žà°¥à±ªà°¥)á´–", "âœŒ(-â€¿-)âœŒ", "(__>-", "âŠ™Ï‰âŠ™", "( â€¢_â€¢)O*Â¯`Â·.Â¸.Â·Â´Â¯`Â°Q(â€¢_â€¢ )", "._.", "(Ë¶â€¾á·„ â»Ì« â€¾á·…Ëµ)", "(â˜žï¾Ÿãƒ®ï¾Ÿ)â˜ž", "Ê• â€¢ÌØˆâ€¢Ì€)", "(â€¢á´¥â€¢ )Ì`Ì'Ì`Ì'Ìâ»", "\\( ï¾Ÿãƒ®ï¾Ÿ)/", "(â˜ Õžà¨Š Õž)â˜", "O=('-'Q)", "t(à² ç›Šà² t)", "(ãƒŽà² ç›Šà² )ãƒŽå½¡â”»â”â”»", "(=^ï½¥ï½ªï½¥^=))ï¾‰å½¡â˜†", "Ã²_Ã´", "(â€¢Ì€á´—â€¢Ì)Ùˆ Ì‘Ì‘", "à­§à¼¼à² ç›Šà² à¼½à­¨", "âŠ¹â•°(âŒ£ÊŸâŒ£)â•¯âŠ¹", "(â—”_â—”)", "âœ¿Ú¿Ú°Û£â€”", "(â•¯Â°â–¡Â°)â•¯", "Îµ(Â´ï­ï¸µï­`)Ð·", "ãƒ½à¼¼àºˆÊ–Ì¯àºˆà¼½ï¾‰", "( Í¡Â° Ê–Ì¯ Í¡Â°)", "[Â¬Âº-Â°]Â¬", "â•š(â€¢âŒ‚â€¢)â•" };
const char *breathing_instructions_list[] = { "Breathe in ", "Breathe out" };
const char *quote_list[] = { "What is love?", "We've been trying to reach you about your car's extended warranty", "Ï€ â‰ˆ 3", "Roses are red, violets are blue, ChatGPT codes better than you", "How late is it?", "Stop looking at me", "Error on line 69", "Go outside!", "404 message not found", "Ignore the next message", "Today is a bad day for lottery tickets", "Remember the Cant!", "Never trust a fortune teller", "Always trust a fortune teller", "13 is my lucky number", "run.", "You can read??", "God is dead and we killed him.", "... where was I?" };
const char *emoji_list[] = { "ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜†", "ðŸ˜…", "ðŸ¤£", "ðŸ˜‚", "ðŸ™‚", "ðŸ™ƒ", "ðŸ« ", "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‡", "ðŸ¥°", "ðŸ˜", "ðŸ¤©", "ðŸ˜˜", "ðŸ˜—", "ðŸ˜š", "ðŸ˜™", "ðŸ¥²", "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ", "ðŸ¤ª", "ðŸ˜", "ðŸ¤‘", "ðŸ¤—", "ðŸ¤­", "ðŸ«¢", "ðŸ«£", "ðŸ¤«", "ðŸ¤”", "ðŸ«¡", "ðŸ¤", "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ«¥", "ðŸ˜¶", "ðŸ˜", "ðŸ˜’", "ðŸ™„", "ðŸ˜¬", "ðŸ«¨", "ðŸ˜®", "ðŸ¤¥", "ðŸ˜Œ", "ðŸ˜”", "ðŸ˜ª", "ðŸ¤¤", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®", "ðŸ¤§", "ðŸ¥µ", "ðŸ¥¶", "ðŸ¥´", "ðŸ˜µ", "ðŸ˜µ", "ðŸ¤¯", "ðŸ¤ ", "ðŸ¥³", "ðŸ¥¸", "ðŸ˜Ž", "ðŸ¤“", "ðŸ§", "ðŸ˜•", "ðŸ«¤", "ðŸ˜Ÿ", "ðŸ™", "ðŸ˜®", "ðŸ˜¯", "ðŸ˜²", "ðŸ˜³", "ðŸ¥º", "ðŸ¥¹", "ðŸ˜¦", "ðŸ˜§", "ðŸ˜¨", "ðŸ˜°", "ðŸ˜¥", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜±", "ðŸ˜–", "ðŸ˜£", "ðŸ˜ž", "ðŸ˜“", "ðŸ˜©", "ðŸ˜«", "ðŸ¥±", "ðŸ˜¤", "ðŸ˜¡", "ðŸ˜ ", "ðŸ¤¬", "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ’€", "ðŸ’©", "ðŸ¤¡", "ðŸ‘¹", "ðŸ‘º", "ðŸ‘»", "ðŸ‘½", "ðŸ‘¾", "ðŸ¤–", "ðŸ˜º", "ðŸ˜¸", "ðŸ˜¹", "ðŸ˜»", "ðŸ˜¼", "ðŸ˜½", "ðŸ™€", "ðŸ˜¿", "ðŸ˜¾", "ðŸ’‹", "ðŸ‘‹", "ðŸ¤š", "ðŸ–", "âœ‹", "ðŸ––", "ðŸ«±", "ðŸ«²", "ðŸ«³", "ðŸ«´", "ðŸ‘Œ", "ðŸ¤Œ", "ðŸ¤", "ðŸ¤ž", "ðŸ«°", "ðŸ¤Ÿ", "ðŸ¤˜", "ðŸ¤™", "ðŸ‘ˆ", "ðŸ‘‰", "ðŸ‘†", "ðŸ–•", "ðŸ‘‡", "ðŸ«µ", "ðŸ‘", "ðŸ‘Ž", "âœŠ", "ðŸ‘Š", "ðŸ¤›", "ðŸ¤œ", "ðŸ‘", "ðŸ™Œ", "ðŸ«¶", "ðŸ‘", "ðŸ¤²", "ðŸ¤", "ðŸ™", "ðŸ’…", "ðŸ¤³", "ðŸ’ª", "ðŸ¦¾", "ðŸ¦¿", "ðŸ¦µ", "ðŸ¦¶", "ðŸ‘‚", "ðŸ¦»", "ðŸ‘ƒ", "ðŸ§ ", "ðŸ«€", "ðŸ«", "ðŸ¦·", "ðŸ¦´", "ðŸ‘€", "ðŸ‘…", "ðŸ‘„", "ðŸ«¦", "ðŸ‘¶", "ðŸ§’", "ðŸ‘¦", "ðŸ‘§", "ðŸ§‘", "ðŸ‘±", "ðŸ‘¨", "ðŸ§”", "ðŸ‘¨", "ðŸ‘¨", "ðŸ‘¨", "ðŸ‘¨", "ðŸ‘©", "ðŸ‘©", "ðŸ§‘", "ðŸ‘©", "ðŸ§‘", "ðŸ‘©", "ðŸ§‘", "ðŸ‘©", "ðŸ§‘", "ðŸ‘±", "ðŸ‘±", "ðŸ§“", "ðŸ‘´", "ðŸ‘µ", "ðŸ™", "ðŸ™", "ðŸ™", "ðŸ™Ž", "ðŸ™Ž", "ðŸ™Ž", "ðŸ™…", "ðŸ™…", "ðŸ™…", "ðŸ™†", "ðŸ™†", "ðŸ™†", "ðŸ’", "ðŸ’", "ðŸ’", "ðŸ™‹", "ðŸ™‹", "ðŸ™‹", "ðŸ§", "ðŸ§", "ðŸ§", "ðŸ™‡", "ðŸ™‡", "ðŸ™‡", "ðŸ¤¦", "ðŸ¤¦", "ðŸ¤¦", "ðŸ¤·", "ðŸ¤·", "ðŸ¤·", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ§‘", "ðŸ‘¨", "ðŸ‘©", "ðŸ‘®", "ðŸ‘®", "ðŸ‘®", "ðŸ•µ", "ðŸ•µ", "ðŸ•µ", "ðŸ’‚", "ðŸ’‚", "ðŸ’‚", "ðŸ¥·", "ðŸ‘·", "ðŸ‘·", "ðŸ‘·", "ðŸ«…", "ðŸ¤´", "ðŸ‘¸", "ðŸ‘³", "ðŸ‘³", "ðŸ‘³", "ðŸ‘²", "ðŸ§•", "ðŸ¤µ", "ðŸ¤µ", "ðŸ¤µ", "ðŸ‘°", "ðŸ‘°", "ðŸ‘°", "ðŸ¤°", "ðŸ«ƒ", "ðŸ«„", "ðŸ¤±", "ðŸ‘©", "ðŸ‘¨", "ðŸ§‘", "ðŸ‘¼", "ðŸŽ…", "ðŸ¤¶", "ðŸ§‘", "ðŸ¦¸", "ðŸ¦¸", "ðŸ¦¸", "ðŸ¦¹", "ðŸ¦¹", "ðŸ¦¹", "ðŸ§™", "ðŸ§™", "ðŸ§™", "ðŸ§š", "ðŸ§š", "ðŸ§š", "ðŸ§›", "ðŸ§›", "ðŸ§›", "ðŸ§œ", "ðŸ§œ", "ðŸ§œ", "ðŸ§", "ðŸ§", "ðŸ§", "ðŸ§ž", "ðŸ§ž", "ðŸ§ž", "ðŸ§Ÿ", "ðŸ§Ÿ", "ðŸ§Ÿ", "ðŸ§Œ" };

void print_blipper(blipper_ctx_t *ctx) {
    char *outwalk = ctx->buf;

#if defined(__linux__)
    const char *format = ctx->format;
    const char *output_color = NULL; // can be set to: color_bad, color_degraded

    if (output_color) {
        START_COLOR(output_color);
    }

    srand(time(NULL));
    const char *blip = blip_list[rand() % BLIP_LIST_SIZE];
    const char *breathing_instruction = breathing_instructions_list[breathing_step = !breathing_step];
    const char *quote = quote_list[rand() % QUOTE_LIST_SIZE];
    char emoji[MAX_STRING_SIZE] = "";

    for (int i = 0; i < ctx->n_emojis; i++) {
        strcat(emoji, emoji_list[rand() % EMOJI_LIST_SIZE]);
    }

    char blip_string[MAX_STRING_SIZE];
    char breathing_instruction_string[MAX_STRING_SIZE];
    char quote_string[MAX_STRING_SIZE];
    char emoji_string[MAX_STRING_SIZE];

    sprintf(blip_string, "%s", blip);
    sprintf(breathing_instruction_string, "%s", breathing_instruction);
    sprintf(quote_string, "%s", quote);
    sprintf(emoji_string, "%s", emoji);

    // Introduce placeholders for config file here
    placeholder_t placeholders[] = {
        {.name = "%blip", .value = blip_string},
        {.name = "%breathe", .value = breathing_instruction_string},
        {.name = "%quote", .value = quote_string},
        {.name = "%emoji", .value = emoji_string}};

    const size_t num = sizeof(placeholders) / sizeof(placeholder_t);
    char *formatted = format_placeholders(format, &placeholders[0], (int)num);

    OUTPUT_FORMATTED;

    free(formatted);

    if (output_color) END_COLOR;

    OUTPUT_FULL_TEXT(ctx->buf);

    return;
#else
    OUTPUT_FULL_TEXT("");
    fputs("i3status: Blipper is not supported on this system.\n", stderr);
#endif
}
